<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Window</title>
  <link name=inject opt="bulma" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <script>
    var prepareInject = new Event('injectReady')
    function fetchResource() {
      fetch('./AppBase.css')
        .then(r => r.text())
        .then(css => {
          let x = document.createElement('style')
          x.innerHTML = css
          x.setAttribute('name', 'inject')
          x.setAttribute('opt', 'AppBase')
          document.head.appendChild(x)
          fetch('./jackpot.js')
            .then(r => r.text())
            .then(js => {
              let x = document.createElement('script')
              x.innerHTML = js
              x.setAttribute('name', 'inject')
              x.setAttribute('opt', 'jackpot')
              document.head.appendChild(x)
              document.dispatchEvent(prepareInject)
            })
        })
    }
    function saveInjectCode() {
      let injectCODE = {}
      document.querySelectorAll('[name=inject]').forEach(tag => {
        let key = tag.getAttribute('opt')
        key == 'jackpot' ?
          injectCODE[`${key}`] = tag.innerHTML
          : injectCODE[`${key}`] = tag.outerHTML
      })
      ipc.send('saveAppData', { key: 'gwInjectCode', value: injectCODE })
    }

    fetchResource()
    document.addEventListener('injectReady', () => {
      saveInjectCode()
      ipc.send('loadURL', 'https://www.nimo.tv/fragments/act/slots-game')
    }, { once: true })
  </script>
</head>

<body name="inject" opt="body" class="noside">
  <!-- APP TITLE BAR  -->
  <section id=APP_TITLEBAR class="active">
    <div class="left">
      <div class="trafficLight">
        <button class="close" onclick="ipc.send('action','CLOSE')" title="Đóng cửa sổ">&nbsp;</button>
        <button class="min" onclick="ipc.send('action', 'MINIMIZE')" title="Minimize">&nbsp;</button>
        <button class="max" title="Maximize is disabled">&nbsp;</button>
      </div>
    </div>
    <div class="has-text-centered p-1">
      <p id=APP_TITLE class="is-size-6">
        UserName
      </p>
    </div>
    <div class="right">
      <div class=FlexContainer>
        <span class=ssColor style="background-color: #888;"></span>
        <span class=ssid>ss1</span>
      </div>
    </div>
  </section>

  <!----- APP BODY ----->
  <section id="APP_BODY" class="UserSelectNONE">
    <section id="GamePanel" class="box bottom show">
      <div class="is-flex is-justify-content-space-between">
        <div>
          <button id="auto-panel-toggle" class="button is-small"
            onclick="$id('GamePanel').classList.toggle('min')">></button>
        </div>
        <div>
          <label class="switch is-size-3">
            <input type="checkbox" name=autoToggle
              onclick="">
            <span class="slider round"></span>
          </label>
        </div>
        <div> right </div>
      </div>
    </section>
  </section> <!-- END APP_BODY -->
</body>

</html>