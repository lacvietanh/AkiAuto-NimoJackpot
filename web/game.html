<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Window</title>
  <link name=inject opt="bulma" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <script>
    var prepareInject = new Event('injectReady')
    function fetchResource() {
      fetch('./AppBase.css')
        .then(r => r.text())
        .then(css => {
          let x = document.createElement('style')
          x.innerHTML = css
          x.setAttribute('name', 'inject')
          x.setAttribute('opt', 'AppBase')
          document.head.appendChild(x)
          fetch('./jackpot.js')
            .then(r => r.text())
            .then(js => {
              let x = document.createElement('script')
              x.innerHTML = js
              x.setAttribute('name', 'inject')
              x.setAttribute('opt', 'jackpot')
              document.head.appendChild(x)
              document.dispatchEvent(prepareInject)
            })
        })
    }
    function saveInjectCode() {
      let injectCODE = {}
      document.querySelectorAll('[name=inject]').forEach(tag => {
        let key = tag.getAttribute('opt')
        key == 'jackpot' ?
          injectCODE[`${key}`] = tag.innerHTML
          : injectCODE[`${key}`] = tag.outerHTML
      })
      ipc.send('saveAppData', { key: 'gwInjectCode', value: injectCODE })
    }

    fetchResource()
    document.addEventListener('injectReady', () => {
      saveInjectCode()
      // ipc.send('loadURL', 'https://www.nimo.tv/fragments/act/slots-game')
    }, { once: true })
  </script>
</head>

<body name="inject" opt="body" class="noside">
  <!-- APP TITLE BAR  -->
  <section id=APP_TITLEBAR class="active">
    <div class="left">
      <div class="trafficLight">
        <button class="close" onclick="ipc.send('action','CLOSE')" title="Đóng cửa sổ">&nbsp;</button>
        <button class="min" onclick="ipc.send('action', 'MINIMIZE')" title="Minimize">&nbsp;</button>
        <button class="max" title="Maximize is disabled">&nbsp;</button>
      </div>
    </div>
    <div class="has-text-centered p-1 FlexContainer">
      <img id="AkiAccAvt" width="30" height="30" class="mr-1">
      <p id=APP_TITLE class="is-size-6"> UserName </p>
    </div>
    <div class="right">
      <div class=FlexContainer>
        <span class=ssColor style="background-color: #888;"></span>
        <span class=ssid>ss1</span>
      </div>
    </div>
  </section>

  <!----- APP BODY ----->
  <section id="APP_BODY" class="UserSelectNONE">
    <section id="GamePanel" class="box bottom show is-size-7">
      <div class="gamePanelFixed">
        <button id="auto-panel-toggle" class="button is-small is-warning is-rounded"
          onclick="UI.gamePanelToggle()" style="margin-top: 73px;">&#8594</button>
        <br>
        <button id="gameSize-toggle" class="button is-small is-danger is-rounded"
          onclick="UI.gameSizeToggle()"
          style="margin-top: 3px;">&#8607</button>
      </div>
      <div class="is-flex is-justify-content-space-between is-align-items-stretch">
        <div class="box m-1 p-3 has-text-centered" style="width: 115px;">
          <label class="switch is-size-4">
            <input id="autoConfig-switch" type="checkbox" name=autoToggle onchange="menu.RUN()">
            <span class="slider round"></span>
          </label>
          <div class="mt-3 is-size-5" style="color: #ff8000;">
            0000000
          </div>
        </div>
        <div id="panel-autoConfig" class="box m-1 p-2 is-flex is-justify-content-space-between"
          style="width: 170px;">
          <div class="has-text-weight-bold">
            <div>Target:</div>
            <div>Click:</div>
            <div>Below:</div>
            <div>BET:</div>
            <div>Interval:</div>
          </div>
          <div class="has-text-grey">
            <div>
              <span id="autoConfig-prize">500000</span>
            </div>
            <div>
              <label>
                SPIN &nbsp;<input type="radio" name="auto-runType" id="" disabled>
              </label>
              <label>
                <input type="radio" name="auto-runType" id="" checked> AUTO
              </label>
            </div>
            <div>
              <label>
                WAIT <input type="radio" name="auto-stopType" id="" disabled>
              </label>
              <label>
                <input type="radio" name="auto-stopType" id="" checked> STOP
              </label>
            </div>
            <div id="gameInfo-BET">450 </div>
            <div><span id="autoConfig-Interval">3000</span> ms</div>
          </div>
        </div>
        <div id="panel-userInfo" class="box m-1 p-2 is-flex is-justify-content-space-between"
          style="width: 150px;">
          <div>
            <div>Chips:</div>
            <div>Diamond:</div>
            <hr class="m-2">
            <div>Tt.Win:</div>
            <div>Tt.Lost:</div>
          </div>
          <div>
            <div>000</div>
            <div>000</div>
            <hr class="m-2">
            <div>000</div>
            <div>000</div>
          </div>
        </div>
      </div>
    </section>
  </section> <!-- END APP_BODY -->
</body>

</html>